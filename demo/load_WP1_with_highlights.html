<!DOCTYPE html>
<html style="margin: 0; width: 100%; height: 100%; ">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Pvjs Simple Built Production Example</title>
  </head>
  <body>
    <!--
    <iframe id="pathway1" src="./template.html" style="width: 800px; height: 570px; border: 1px solid #ccc;"></iframe>
    -->

    <script src="./lib/pvjs/pvjs-dev-polyfills.bundle.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="./lib/pvjs/pvjs-dev.bundle.js"></script>

    <script>

      //*
      xtag.register('wikipathways-pvjs', {
        // TODO extends isn't working
        //extends: 'div',
        lifecycle: {
          created: function() {
            // TODO compile the template and insert it as a string, using the script tag method of including another page in this one
            xtag.innerHTML(this, '<iframe id="pvjs-frame" src="./load-one.html" style="width:inherit; height:inherit; margin:0px; border: 0px; " />');
            iFrameResize({
              enablePublicMethods: true,
              resizedCallback: function() {
                console.log('parent says resized');
              }
            },'#pvjs-frame');
          }
        }
      });

      xtag.register('x-foo', {
        lifecycle: {
          created: function() {
            // works because we're not using another component
            this.innerHTML = 'Hello foo';
          }
        },
        methods: {
          hello: function() {
            console.log('hello from x-foo');
          }
        }
      });

      xtag.register('wikipathways-pvjs', {
        lifecycle: {
          created: function() {
            // Since we use xtag.innerHTML, x-foo will be available immediately
            xtag.innerHTML(this, 'Super <x-foo></x-foo>');

            // You can call x-foo methods already
            var foo = this.querySelector('x-foo');
            foo.hello();
          }
        }
      });
      //*/
      //$.ajax()
    </script>
</body>
</html>
